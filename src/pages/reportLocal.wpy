<style lang="less">
.listName{
  width: 690rpx;
  padding: 30rpx;
  font-size: 30rpx;
  color: #343434;
  font-weight: 600;
}
.listName .listNameInfo{
  font-size: 20rpx;
  color: #979797;
  font-weight: 400;
}
.poperItem{
  width: 660rpx;
  height: 82rpx;
  padding: 25rpx 20rpx;
  background-color: #f7f7f7;
  border-radius: 20rpx;
  display: flex;
  // align-items: center;
  justify-content: space-between;
  margin-top: 20rpx;
}
.poperItem .info,
.poperItem icon{
  font-size: 30rpx !important;
  color: #343434;
}
.poperItem text{
  font-size: 25rpx;
  color: #979797;
}
.new{
  font-size: 50rpx;
  color: #979797;
  align-items: center;
  justify-content: center !important;
}
.listButton{
  margin-bottom: 170rpx;
}
.reportButton{
  width: 750rpx;
  height: 150rpx;
  position: fixed;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-top: 1rpx solid #979797;
}
.reportButton view{
  width: 673rpx;
  height: 94rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #7bb312;
  border-radius: 20rpx;
  font-size: 30rpx;
  color: #fff;
}
.mask{
  display: flex;
  align-items: center;
  justify-content: center;
}
.setTime{
  width: 640rpx;
  // height: 300rpx;
  background-color: #fff;
  padding: 30rpx;
  border-radius: 20rpx;
}
.setTimeName{
  font-size: 34rpx;
  font: #343434;
  text-align: center;
}
.setTimeName2{
  font-size: 22rpx;
  color: #979797;
  text-align: center;
  height: 40rpx;
  line-height: 40rpx;
}
.setTime .setData{
  width: 640rpx;
  height: 102rpx;
  border: solid #f2f2f2;
  border-width: 1rpx 0 1rpx 0;
  margin-top: 20rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.setTime .setData label{
  font-size: 30rpx;
  color: #343434;
}
.setTime .setData view{
  width: 374rpx;
  height: 55rpx;
  border: 1rpx solid #979797;
}
.setTime .button{
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-direction: column;
}
.setTime .button view{
  width: 584rpx;
  height: 114rpx;
  border-radius: 20rpx;
  font-size: 30rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 20rpx 0;
  border: 1rpx solid #7bb312;
}
.setTime .button view:nth-child(1){
  background-color: #7bb312;
  color: #fff;
}
.setTime .button view:nth-child(2){
  background-color: #fff;
  color: #7bb312;
}
</style>
<template>
  <view>
    <view class="listName">报备楼盘</view>
    <view class="list">
      <productItem></productItem>
    </view>
    <view class="listName">
      待报备客户
      <view class="listNameInfo">该项目为全号报备项目，仅支持报备电话为全号的客户</view>
    </view>
    <view class="list listButton">
      <view class="poperItem">
        <view class="info">
          <view>
            二狗子
            <text>先生</text>
          </view>
          <text>18888888888</text>
        </view>
        <icon class="iconfont icon-shoucang1"></icon>
      </view>
      <view class="poperItem new">+</view>
    </view>
    <view class="reportButton">
      <view @tap="">报备</view>
    </view>
    <view class="mask">
      <view class="setTime">
        <view class="setTimeName">客户预约到访时间</view>
        <view class="setTimeName2">选择客户预计到访时间，方便驻场人员提前准备</view>
        <view class="setData">
          <label>预计到访时间</label>
          <view></view>
        </view>
        <view class="button">
          <view>确认到访时间并报备</view>
          <view>跳过并直接报备</view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
  import wepy from 'wepy'
  import productItem from '../components/productItem' // 列表内容组件
  export default class ReportLocal extends wepy.page {
    config = {
      navigationBarTitleText: '报备楼盘'
    }
    components = {
      productItem: productItem
    }

    mixins = []

    data = {
      img: '/img/test.jpg',
      test: '',
      userInfo: null,
      requestImgUrl: '',
      diningRoom: []
    }

    computed = {

    }

    methods = {
      goLocalMoreInfo(e) {
        // 产看楼盘的更多信息
        this.$navigate(`/pages/localMoreInfo?id=${e.currentTarget.dataset.id}`)
      },
      goRuleInfo(e) {
        // 进入预约列表
        this.$navigate(`/pages/ruleInfo?id=${e.currentTarget.dataset.id}`)
      }
    }

    events = {

    }

    onLoad() {
      this.userInfo = this.$parent.globalData.userInfo
      this.requestImgUrl = this.$parent.globalData.requestImgUrl
      this.getFoodList()
    }
    getFoodList() {
      wx.request({
        url: `${this.$parent.globalData.requestUrl}/index`,
        method: 'GET',
        data: {
          mobile: this.userName,
          password: this.userPaw
        },
        success: data => {
          if (data.data.code == 1) {
            this.diningRoom = data.data.data
            let i = 0
            var reg = /\\|\//g
            for (i in this.diningRoom) {
              // 替换反斜杠正则
              // replace(reg,"/")
              this.diningRoom[i]['img'] = this.diningRoom[i]['img'].replace(reg, '/')
              this.diningRoom[i]['detail'] = this.diningRoom[i]['detail'].replace(reg, '/')
            }
            this.$apply()
          } else {
            wx.showModal({
              title: '',
              content: data.data.msg
            })
          }
        }
      })
    }
  }
</script>